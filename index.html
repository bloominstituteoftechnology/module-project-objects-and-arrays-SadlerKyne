<!DOCTYPE html>
<html lang="en">

<head>
  <title>Objects and Arrays</title>
</head>

<body>
  <h1>Objects and Arrays</h1>
  <p>Please load this file in VSCode and Chrome, and open the Console in Chrome Dev Tools.</p>
  <p>Work through the challenges found inside the script tag in this document,
    until the Console reports all tests passing.</p>

  <script>
   // CHALLENGE 1
function buildPeter() {
    return { firstName: "Peter", lastName: "Pan", age: 12 };
}
const peter = buildPeter();

// CHALLENGE 2
function buildUser(firstName, lastName, age) {
    return { firstName, lastName, age };
}
const john = buildUser('John', 'Smith', 30);

// CHALLENGE 3
function deletePrice(obj) {
    if ("price" in obj) {
        delete obj.price;
    } else {
        obj.priceless = true;
    }
    return obj;
}
console.log(deletePrice({ item: "Tesla Model 3", price: 40000 }));
console.log(deletePrice({ item: "Kobo Libra 2" }));

// CHALLENGE 4
function evenList(arr) {
    return arr.length % 2 === 0;
}
console.log(evenList(['a']));
console.log(evenList(['a', 'b']));

// CHALLENGE 5
function firstOrLast(arr, isFirst) {
    return isFirst ? arr[0] : arr[arr.length - 1];
}
console.log(firstOrLast(['a', 'b'], true));
console.log(firstOrLast(['a', 'b'], false));

// CHALLENGE 6
function pushElement(arr, value) {
    arr.push(value);
    return arr;
}
console.log(pushElement([], 1));
console.log(pushElement(['a', 'b'], 'c'));

// CHALLENGE 7
function stripX(inputString) {
    const resultArray = [];
    for (const char of inputString.split("")) {
        if (char !== "x") {
            resultArray.push(char);
        }
    }
    return resultArray.join("");
}
console.log(stripX("xenomorph"));
console.log(stripX("paradox"));

// CHALLENGE 8
function stripChar(inputString, charToRemove) {
    const resultArray = [];
    for (const char of inputString.split("")) {
        if (char !== charToRemove) {
            resultArray.push(char);
        }
    }
    return resultArray.join("");
}
console.log(stripChar("xenomorph", "x"));
console.log(stripChar("paradox", "a"));

// CHALLENGE 9
function getProps(obj) {
    const excludedProps = ["age", "married"];
    const propsArray = [];
    for (const prop in obj) {
        if (!excludedProps.includes(prop)) {
            propsArray.push(prop);
        }
    }
    return propsArray;
}
console.log(getProps({ lastName: "Smith", age: 35 }));
console.log(getProps({ firstName: "Jane", married: false }));
console.log(getProps({ name: "Bamby", favFood: "flowers" }));


    // üß™ TESTS, do not work below this line
    // üß™ TESTS, do not work below this line
    // üß™ TESTS, do not work below this line
    runTests('CHALLENGE 1 - buildPeter', buildPeter, [
      [[], { firstName: "Peter", lastName: "Pan", age: 12 }],
    ])
    runTests('CHALLENGE 2 - buildUser', buildUser, [
      [["John", "Smith", 30], { firstName: "John", lastName: "Smith", age: 30 }],
      [["Jane", "Doe", 25], { firstName: "Jane", lastName: "Doe", age: 25 }],
    ])
    runTests('CHALLENGE 3 - deletePrice', deletePrice, [
      [[{ item: "Tesla Model 3", price: 40000 }], { item: "Tesla Model 3" }],
      [[{ item: "Friends and family", price: 0 }], { item: "Friends and family" }],
      [[{ item: "Kobo Libra 2" }], { item: "Kobo Libra 2", priceless: true }],
    ])
    runTests('CHALLENGE 4 - evenList', evenList, [
      [[[]], true],
      [[['a']], false],
      [[['a', 'b']], true],
    ])
    runTests('CHALLENGE 5 - firstOrLast', firstOrLast, [
      [[['a', 'b'], true], 'a'],
      [[['a', 'b', 'c'], false], 'c'],
    ])
    runTests('CHALLENGE 6 - pushElement', pushElement, [
      [[[], 1], [1]],
      [[['a', 'b', 'c'], 'd'], ['a', 'b', 'c', 'd']],
    ])
    runTests('CHALLENGE 7 - stripX', stripX, [
      [['extracorporeal'], 'etracorporeal'],
      [['counterexample'], 'countereample'],
      [['xoxo'], 'oo'],
      [['x'], ''],
    ])
    runTests('CHALLENGE 8 - stripChar', stripChar, [
      [['extracorporeal', 'x'], 'etracorporeal'],
      [['counterexample', 'e'], 'countrxampl'],
      [['xoxo', 'o'], 'xx'],
      [['x', 'x'], ''],
    ])
    runTests('CHALLENGE 9 - getProps', getProps, [
      [[{ lastName: "Smith", age: 35 }], ["lastName"]],
      [[{ firstName: "Jane", married: false }], ["firstName"]],
      [[{ firstName: "Jane", married: true, age: 65 }], ["firstName"]],
      [[{ name: "Bamby", favFood: "flowers" }], ["name", "favFood"]],
    ])
    function runTests(testName, func, tests) {
      let results = []
      tests.forEach(test => {
        const argsList = test[0]
        const expected = JSON.stringify(test[1])
        const actual = JSON.stringify(func.apply(null, JSON.parse(JSON.stringify(argsList))))
        results.push([argsList, expected, actual])
      })
      console.log('\n' + testName)
      if (results.every(result => result[1] === result[2])) console.log('\t‚úÖ All tests pass')
      else results.forEach((result, idx) => {
        if (result[1] === result[2]) console.log(`\t‚úÖ Test ${idx + 1} passes`)
        else console.log(`\t‚ùå Test ${idx + 1} fails: ${func.name}(${result[0]
          .map(JSON.stringify)}) should return ${result[1]} but returns ${result[2]}`)
      })
    }
  </script>
</body>

</html>
